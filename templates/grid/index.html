{{ define "grid/index.html" }}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <title>Document</title>

    <style>
        * {
            box-sizing: border-box;
        }
    
        .grid-container > div {
            padding: 1em;
        }
    
        .grid-container {
            display: grid;
            grid-gap: 10px;
            grid-template-columns: repeat(auto-fill, minmax(550px, 1fr));
            grid-template-rows: masonry;
            grid-gap: 10px;
        }

    </style>

</head>

<body>
    <h1>Liste des événements d'urgence et des afficages de besoin en aide</h1>
    
    {{ template "components/grid-toolbar" . }}

    {{ template "components/grid" . }}

</body>

{{ end }}

{{ define "components/grid" }}
<div id="grid" class="grid-container">
    {{ range .Events }}
        {{ template "cards/singleEventCard" . }}
    {{ end }}
</div>
{{ end}}

{{ define "components/grid-toolbar" }}
<div id="tool-bar" class="w3-bar w3-light-grey">
    <!-- search box-->
    <div class="w3-bar-item w3-left">
        <!-- search with HTMX, will return event_list_table.html -->
        <input class="w3-input w3-border" name="search" type="search" placeholder="Recherche..." id="search-box"
            hx-trigger="input changed delay:300ms, search" hx-indicator=".htmx-indicator" hx-get="/grid/search"
            hx-target="#grid" hx-swap="outerHTML">
    </div>

    <div class="w3-bar-item w3-left">Afficher seuelement:</div>

    <!-- drop down: Type -->
    <div class="w3-bar-item w3-left"><label for="type-dropdown">Type:</label></div>
    <div class="w3-bar-item w3-left">
        <select class="w3-select w3-border" id="type-dropdown" name="filter-type">
            <option value="all">Tous</option>
            <option value="event">Événement</option>
            <option value="help">Aide</option>
        </select>
    </div>

    <!-- drop down: Urgency -->
    <div class="w3-bar-item w3-left"><label for="urgency-dropdown">Urgence:</label></div>
    <div class="w3-bar-item w3-left">
        <select class="w3-select w3-border" id="urgency-dropdown" name="filter-urgency">
            <option value="all">Tous</option>
            <option value="futur">Futur</option>
            <option value="present">Présent</option>
            <option value="past">Passé</option>
        </select>
    </div>

    <!-- drop down: Danger -->
    <div class="w3-bar-item w3-left"><label for="danger-dropdown">Danger:</label></div>
    <div class="w3-bar-item w3-left" >
        <select class="w3-select w3-border" id="danger-dropdown" name="filter-danger">
            <option value="all">Tous</option>
            <option value="high">Élevé</option>
            <option value="medium">Modéré</option>
            <option value="low">Faible</option>
        </select>
    </div>
    
    <div class="w3-bar-item w3-left">Trier par:</div>
    
    <!-- Sorting -->
    <div class="w3-bar-item w3-left">
        <select class="w3-select w3-border" id="sort-dropdown" name="sort">
            <option value="date">Date</option>
            <option value="name">Nom</option>
            <option value="urgency">Urgence</option>
            <option value="danger">Danger</option>
            <option value="category">Catégorie</option>
            <option value="type">Type</option>
            <option value="besoin">Besoin d'aide actif</option>
        </select>
    </div>
</div>
{{ end }}